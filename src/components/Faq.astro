---
import type { Faq } from "../types/faq";

const { faqs } = Astro.props as { faqs: Faq[] };
---

<section id="faq" class="relative border-t border-bone/10 py-24">
  <div class="mx-auto max-w-6xl px-6 lg:px-8">
    <div class="max-w-3xl">
      <p class="text-xs uppercase tracking-[0.4em] text-bone/40">
        Veelgestelde vragen
      </p>
      <h2 class="mt-6 font-display text-3xl text-bone md:text-4xl">
        Antwoorden op vragen van reizigers die een Nederlandse geregistreerde
        gids zoeken in Lissabon of Sintra
      </h2>
      <p class="mt-4 text-sm text-bone/70">
        Of je nu een eerste bezoek plant of al vaker in Portugal bent geweest
        wij zorgen voor een ontspannen en professionele begeleide ervaring.
      </p>
    </div>

    <div class="mt-16 grid gap-6">
      {
        faqs.map((faq) => (
          <details
            class="group rounded-3xl border border-bone/10 bg-slate/25 text-sm text-bone/70 backdrop-blur-md transition hover:border-accent/40"
            data-faq-item
            data-faq-question={faq.question}
          >
            <summary class="flex w-full cursor-pointer list-none items-center justify-between gap-6 p-8 font-display text-xl text-bone">
              <span>{faq.question}</span>
              <span class="inline-flex h-8 w-8 items-center justify-center text-bone/60 transition group-open:border-accent/50 group-open:text-accent">
                <span class="block group-open:hidden" aria-hidden="true">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="h-5 w-5"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="m19.5 8.25-7.5 7.5-7.5-7.5"
                    />
                  </svg>
                </span>
                <span class="hidden group-open:block" aria-hidden="true">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="h-5 w-5"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="m4.5 15.75 7.5-7.5 7.5 7.5"
                    />
                  </svg>
                </span>
              </span>
            </summary>
            <div class="px-8 pb-8 text-bone/70">
              <p>{faq.answer}</p>
            </div>
          </details>
        ))
      }
    </div>
  </div>
</section>

<script>
  const faqItems = document.querySelectorAll("[data-faq-item]");

  faqItems.forEach((item) => {
    item.addEventListener("toggle", () => {
      const question = item.getAttribute("data-faq-question") || "unknown";
      window.phCapture?.("faq_toggle", {
        question,
        open: item.open ? "true" : "false",
      });
    });
  });
</script>
